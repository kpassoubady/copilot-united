# Personal Expense Tracker üí∞

[![ASP.NET Core](https://img.shields.io/badge/ASP.NET%20Core-10.0-purple.svg)](https://dotnet.microsoft.com/apps/aspnet)
[![C#](https://img.shields.io/badge/C%23-13-blue.svg)](https://docs.microsoft.com/dotnet/csharp/)
[![SQLite](https://img.shields.io/badge/SQLite-Database-lightblue.svg)](https://www.sqlite.org/)
[![Bootstrap](https://img.shields.io/badge/Bootstrap-5.3.2-purple.svg)](https://getbootstrap.com/)
[![License](https://img.shields.io/badge/License-MIT-yellow.svg)](../LICENSE)

A comprehensive, full-stack personal expense tracking application built with **ASP.NET Core 10**, **Razor Pages**, and **Bootstrap 5**. Features a modern responsive UI, robust REST APIs, comprehensive analytics, and enterprise-grade testing coverage.

## ‚ú® Features

### üè† **Dashboard & Analytics**

- Interactive dashboard with expense summaries and trends
- Monthly spending analytics and category breakdowns
- Visual expense distribution charts
- Quick action buttons for common tasks

### üí∏ **Expense Management**

- Create, read, update, and delete expenses
- Advanced search and filtering capabilities
- Category-based expense organization
- Date range filtering and sorting

### üè∑Ô∏è **Category Management**

- Custom expense categories with colors and icons
- Category-wise spending analytics
- Bulk category operations

### üåê **Modern Web Interface**

- Responsive design optimized for all devices
- Dark/Light theme support with auto-detection
- Accessibility-first design (ARIA labels, semantic HTML)
- Progressive Web App (PWA) features

### üîå **REST API**

- Complete RESTful API for all operations
- JSON-based data exchange
- Advanced analytics endpoints
- OpenAPI/Swagger documentation

### üìä **Advanced Analytics**

- Monthly and daily spending trends
- Category-wise expense analysis
- Statistical calculations (averages, totals, counts)
- Historical data analysis

## üöÄ Quick Start

### Prerequisites

- **.NET SDK 10.0** or higher
- **Entity Framework Core Tools** (`dotnet tool install --global dotnet-ef`)
- **Git** (for cloning the repository)

### Installation & Setup

1. **Clone the Repository**

   ```bash
   git clone https://github.com/kpassoubady/expense-tracker-dotnet.git
   cd expense-tracker-dotnet
   ```

2. **Restore Dependencies**

   ```bash
   dotnet restore
   ```

3. **Build the Application**

   ```bash
   dotnet build
   ```

4. **Run Database Migrations**

   ```bash
   dotnet ef database update --project src/ExpenseTracker.Web/ExpenseTracker.Web.csproj
   ```

5. **Start the Application**

   ```bash
   dotnet run --project src/ExpenseTracker.Web/ExpenseTracker.Web.csproj
   ```

6. **Access the Application**
   - **Web Interface**: [http://localhost:5000](http://localhost:5000) or [https://localhost:5001](https://localhost:5001)
   - **Swagger API Docs**: [http://localhost:5000/swagger](http://localhost:5000/swagger)
   - **REST API Base**: [http://localhost:5000/api](http://localhost:5000/api)

### Database Access

- **Connection String**: `Data Source=expensetracker.db`
- **Database File**: `expensetracker.db` (SQLite file in project root)

## üèóÔ∏è Architecture

### Technology Stack

```
Frontend:    Razor Pages + Bootstrap 5 + JavaScript (jQuery)
Backend:     ASP.NET Core 10 + Entity Framework Core 10
Database:    SQLite (Development) / SQL Server (Production)
Validation:  FluentValidation + Data Annotations
Testing:     xUnit + Moq + FluentAssertions
Build:       .NET SDK 10 + MSBuild
```

### Project Structure

```
src/
‚îî‚îÄ‚îÄ ExpenseTracker.Web/
    ‚îú‚îÄ‚îÄ Controllers/          # REST API Controllers (optional)
    ‚îú‚îÄ‚îÄ Data/                 # DbContext and database configuration
    ‚îÇ   ‚îî‚îÄ‚îÄ ExpenseTrackerDbContext.cs
    ‚îú‚îÄ‚îÄ DTOs/                 # Data Transfer Objects
    ‚îú‚îÄ‚îÄ Exceptions/           # Custom exception classes
    ‚îú‚îÄ‚îÄ Extensions/           # Service registration extensions
    ‚îú‚îÄ‚îÄ Models/               # Entity models
    ‚îÇ   ‚îú‚îÄ‚îÄ Category.cs
    ‚îÇ   ‚îî‚îÄ‚îÄ Expense.cs
    ‚îú‚îÄ‚îÄ Pages/                # Razor Pages
    ‚îÇ   ‚îú‚îÄ‚îÄ Categories/       # Category management pages
    ‚îÇ   ‚îú‚îÄ‚îÄ Expenses/         # Expense management pages
    ‚îÇ   ‚îú‚îÄ‚îÄ Shared/           # Layout and partial views
    ‚îÇ   ‚îú‚îÄ‚îÄ Index.cshtml      # Dashboard
    ‚îÇ   ‚îî‚îÄ‚îÄ _ViewImports.cshtml
    ‚îú‚îÄ‚îÄ Services/             # Business logic layer
    ‚îÇ   ‚îú‚îÄ‚îÄ ICategoryService.cs
    ‚îÇ   ‚îú‚îÄ‚îÄ CategoryService.cs
    ‚îÇ   ‚îú‚îÄ‚îÄ IExpenseService.cs
    ‚îÇ   ‚îî‚îÄ‚îÄ ExpenseService.cs
    ‚îú‚îÄ‚îÄ Validators/           # FluentValidation validators
    ‚îú‚îÄ‚îÄ wwwroot/              # Static files (CSS, JS, images)
    ‚îú‚îÄ‚îÄ appsettings.json      # Application configuration
    ‚îî‚îÄ‚îÄ Program.cs            # Application entry point
tests/
‚îî‚îÄ‚îÄ ExpenseTracker.Tests/
    ‚îú‚îÄ‚îÄ Controllers/          # API integration tests
    ‚îú‚îÄ‚îÄ Services/             # Service layer unit tests
    ‚îî‚îÄ‚îÄ ExpenseTrackerTests.cs
```

### Database Schema

```sql
Categories
‚îú‚îÄ‚îÄ Id (PRIMARY KEY, INT, IDENTITY)
‚îú‚îÄ‚îÄ Name (NVARCHAR(100), UNIQUE, NOT NULL)
‚îú‚îÄ‚îÄ Description (NVARCHAR(500), NULLABLE)
‚îú‚îÄ‚îÄ Color (NVARCHAR(7), HEX code, e.g., "#FF5733")
‚îú‚îÄ‚îÄ Icon (NVARCHAR(50), emoji/symbol)
‚îú‚îÄ‚îÄ CreatedAt (DATETIME2, NOT NULL)
‚îî‚îÄ‚îÄ UpdatedAt (DATETIME2, NULLABLE)

Expenses  
‚îú‚îÄ‚îÄ Id (PRIMARY KEY, INT, IDENTITY)
‚îú‚îÄ‚îÄ Description (NVARCHAR(200), NOT NULL)
‚îú‚îÄ‚îÄ Amount (DECIMAL(18,2), NOT NULL, > 0, ‚â§ 10,000)
‚îú‚îÄ‚îÄ ExpenseDate (DATE, NOT NULL)
‚îú‚îÄ‚îÄ CategoryId (INT, FOREIGN KEY ‚Üí Categories.Id)
‚îú‚îÄ‚îÄ CreatedAt (DATETIME2, NOT NULL)
‚îî‚îÄ‚îÄ UpdatedAt (DATETIME2, NULLABLE)
```

### Entity Relationships

```
Category (1) ‚Üê‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ (Many) Expense
    ‚îÇ                      ‚îÇ
    ‚îî‚îÄ‚îÄ Id ‚óÑ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò CategoryId (FK)
```

### Key Components

#### Models (Entities)

- **`Category`**: Expense categories with name, description, color, and icon
- **`Expense`**: Individual expense records linked to categories

#### Services

- **`IExpenseService` / `ExpenseService`**: Business logic, validation, analytics calculations
- **`ICategoryService` / `CategoryService`**: Category operations and relationship management

#### Validators (FluentValidation)

- **`ExpenseValidator`**: Validates expense amount (0-10,000), required fields, date constraints
- **`CategoryValidator`**: Validates category name uniqueness, color format

#### DTOs

- **`ExpenseDto`**: Data transfer for expense operations
- **`CategoryDto`**: Data transfer for category operations
- **`ExpenseAnalyticsDto`**: Analytics response model

## üß™ Test Coverage

### Comprehensive Testing Strategy

| Test Suite              | Purpose                     | Framework        | Coverage                       |
| ----------------------- | --------------------------- | ---------------- | ------------------------------ |
| **Unit Tests**          | Service layer logic         | xUnit + Moq      | Business rules, validation     |
| **Integration Tests**   | API endpoints               | WebApplicationFactory | CRUD, JSON, Error handling |
| **Repository Tests**    | Data layer queries          | SQLite In-Memory | EF Core queries, constraints   |

### Running Tests

```bash
# Run all tests
dotnet test

# Run with verbose output
dotnet test --logger "console;verbosity=detailed"

# Run specific test project
dotnet test tests/ExpenseTracker.Tests/ExpenseTracker.Tests.csproj

# Generate coverage report (requires coverlet)
dotnet test --collect:"XPlat Code Coverage"
```

## üìã API Documentation

### Expense Endpoints

```http
GET    /api/expenses                 # List all expenses
POST   /api/expenses                 # Create new expense
GET    /api/expenses/{id}            # Get specific expense
PUT    /api/expenses/{id}            # Update expense
DELETE /api/expenses/{id}            # Delete expense

# Analytics
GET    /api/expenses/analytics       # Complete analytics data
GET    /api/expenses/by-category     # Group by category
GET    /api/expenses/monthly-summary # Monthly totals
```

### Category Endpoints

```http
GET    /api/categories               # List all categories
POST   /api/categories               # Create new category
GET    /api/categories/{id}          # Get specific category
PUT    /api/categories/{id}          # Update category
DELETE /api/categories/{id}          # Delete category
GET    /api/categories/{id}/expenses # Category expenses
```

### Example API Usage

#### Create an Expense

```bash
curl -X POST http://localhost:5000/api/expenses \
  -H "Content-Type: application/json" \
  -d '{
    "description": "Lunch at restaurant",
    "amount": 25.50,
    "expenseDate": "2025-09-27",
    "categoryId": 1
  }'
```

#### Get Analytics

```bash
curl http://localhost:5000/api/expenses/analytics
```

## üé® UI Features

### Theme System

- **Light Mode**: Clean, professional interface
- **Dark Mode**: Easy on the eyes for extended use  
- **Auto Mode**: Follows system preference
- **Keyboard Shortcut**: `Ctrl/Cmd + Shift + T`

### Responsive Design

- **Mobile First**: Optimized for smartphones and tablets
- **Bootstrap Grid**: Flexible layout system
- **Touch Friendly**: Large buttons and touch targets
- **Progressive Enhancement**: Works without JavaScript

### Accessibility

- **ARIA Labels**: Screen reader compatible
- **Semantic HTML**: Proper heading hierarchy
- **Keyboard Navigation**: Full keyboard support
- **Color Contrast**: WCAG compliant color schemes

## üîß Configuration

### Application Settings

Key configuration options in `appsettings.json`:

```json
{
  "ConnectionStrings": {
    "DefaultConnection": "Data Source=expensetracker.db"
  },
  "Logging": {
    "LogLevel": {
      "Default": "Information",
      "Microsoft.AspNetCore": "Warning",
      "Microsoft.EntityFrameworkCore.Database.Command": "Information"
    }
  }
}
```

### Environment Variables

You can override settings using environment variables:

```bash
export ASPNETCORE_ENVIRONMENT=Production
export ConnectionStrings__DefaultConnection="Data Source=/data/expenses.db"
export ASPNETCORE_URLS="http://+:8080"
```

## üöÄ Deployment

### Production Considerations

1. **Database**: Replace SQLite with SQL Server/PostgreSQL for production
2. **Security**: Enable ASP.NET Core Identity for authentication
3. **Monitoring**: Add health checks and Application Insights
4. **Logging**: Configure Serilog for structured logging
5. **SSL**: Enable HTTPS with proper certificates

### Docker Support

```dockerfile
FROM mcr.microsoft.com/dotnet/aspnet:10.0 AS base
WORKDIR /app
EXPOSE 80

FROM mcr.microsoft.com/dotnet/sdk:10.0 AS build
WORKDIR /src
COPY ["src/ExpenseTracker.Web/ExpenseTracker.Web.csproj", "ExpenseTracker.Web/"]
RUN dotnet restore "ExpenseTracker.Web/ExpenseTracker.Web.csproj"
COPY . .
RUN dotnet publish -c Release -o /app/publish

FROM base AS final
WORKDIR /app
COPY --from=build /app/publish .
ENTRYPOINT ["dotnet", "ExpenseTracker.Web.dll"]
```

## üìà Performance

### Key Metrics

- **Application Startup**: ~1-2 seconds
- **Test Suite Execution**: ~5-10 seconds
- **Memory Usage**: ~100MB (development mode)
- **Database Operations**: Optimized with EF Core queries

### Optimization Features

- **Lazy Loading**: EF Core relationships optimized
- **Query Optimization**: AsNoTracking for read operations
- **Caching**: Response caching for static content
- **Compression**: Gzip/Brotli response compression

## üìù Validation Rules

### Expense Validation

| Field       | Rule                                         |
| ----------- | -------------------------------------------- |
| Description | Required, 1-200 characters                   |
| Amount      | Required, > 0, ‚â§ 10,000                      |
| ExpenseDate | Required, not in future                      |
| CategoryId  | Required, must exist in Categories table     |

### Category Validation

| Field       | Rule                                         |
| ----------- | -------------------------------------------- |
| Name        | Required, 1-100 characters, unique           |
| Description | Optional, max 500 characters                 |
| Color       | Optional, valid HEX format (#RRGGBB)         |
| Icon        | Optional, max 50 characters                  |

## ü§ù Contributing

### Development Setup

1. Fork the repository
2. Create a feature branch (`git checkout -b feature/amazing-feature`)
3. Make your changes
4. Run tests (`dotnet test`)
5. Commit your changes (`git commit -m 'Add amazing feature'`)
6. Push to the branch (`git push origin feature/amazing-feature`)
7. Open a Pull Request

### Code Standards

- **C# Style**: Follow Microsoft C# Coding Conventions
- **Testing**: Maintain 80%+ test coverage
- **Documentation**: Update README for new features
- **Commits**: Use conventional commit messages

## üìù License

This project is licensed under the MIT License - see the [LICENSE](LICENSE) file for details.

## üôè Acknowledgments

- **ASP.NET Core Team** - Excellent framework and documentation
- **Bootstrap Team** - Beautiful, responsive CSS framework
- **Entity Framework Core Team** - Powerful ORM for .NET
- **FluentValidation** - Elegant validation library

---

**Happy Expense Tracking!** üí∞‚ú®
